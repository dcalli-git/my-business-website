<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Salinity Maritime • Complex Ship Repair & Sustainment</title>

  <meta name="description" content="We partner with contractors and program offices to manage complex vessel sustainment programs, modernize shipyard operations, and deliver results. Clear plans, reliable execution, on‑time mission readiness." />
  <meta name="theme-color" content="#07111a" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <link rel="canonical" href="https://www.salinitymaritime.com/">

  <style>
  :root{
    --ink:#e8f1f7;
    --muted:#a9c1d1;
    --panel: rgba(8,12,18,.28);
    --panel-solid:#0c151e;
    --border: rgba(255,255,255,.12);
    --accent:#f5f5f5;
    --headerH: 64px;
    --maxW: 1120px;
    --radius: 16px;
    --font-sans:'Inter',ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    --font-serif:'Playfair Display',serif;
  }
  *{ box-sizing:border-box }
  html{ scroll-behavior:smooth; }
  body{
    height:100%; margin:0; background:#07111a; color:var(--ink);
    font:14px/1.6 var(--font-sans);
    -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  }
  h1, h2, .brand { font-family: var(--font-serif); }

  .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
  .skip-link{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
  .skip-link:focus{
    left:12px; top:12px; width:auto; height:auto; padding:8px 12px; z-index:11;
    background:var(--accent); color:#06101a; border-radius:999px; text-decoration:none; border:1px solid var(--border);
  }

  /* Background canvas */
  #background-canvas{ position:fixed; inset:0; z-index:0; display:block; background:#07111a; pointer-events:none; }
  .vignette{ position:fixed; inset:0; z-index:1; pointer-events:none;
    background: radial-gradient(100% 80% at 50% 50%, rgba(0,0,0,0) 60%, rgba(0,0,0,.36) 100%);
  }

  /* Header */
  header.site{
    position:fixed; inset:0 0 auto 0; height:var(--headerH); z-index:10;
    display:flex; align-items:center;
    backdrop-filter: blur(10px) saturate(120%);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
    background: linear-gradient(to bottom, rgba(8,12,18,.55), rgba(8,12,18,.28));
    border-bottom:1px solid var(--border);
  }
  .wrap{ width:min(calc(100% - 24px), var(--maxW)); margin:0 auto; display:flex; align-items:center; justify-content: space-between; gap:16px; }
  .brand{ font-weight:700; letter-spacing:.2px; color:var(--accent); text-decoration:none; font-size:22px; }

  /* Buttons and links */
  .btn{
    border:1px solid var(--border); color:#06101a; background:var(--accent);
    padding:8px 12px; border-radius:999px; font-weight:600; font-size:13px; text-decoration:none;
  }
  /* Desktop nav Contact button – not bright until its section is active */
  nav .links .btn{
    background: transparent;
    color: var(--ink);
    border-color: var(--border);
  }
  nav .links .btn:hover{ background: rgba(255,255,255,.08); }
  nav .links .btn[aria-current="true"]{ background: var(--accent); color:#06101a; }

  .btn:hover{ filter:brightness(1.05); }
  a:focus-visible, .btn:focus-visible, .hamburger:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; }
  .link{ color:var(--accent); text-decoration:underline; text-underline-offset:2px; padding:8px 6px; }
  .link:hover{ text-decoration-thickness:2px; }

  /* Desktop nav list */
  nav .links{ display:none; margin:0; padding:0; list-style:none; gap:18px; align-items:center; }
  nav .links a{ color:var(--muted); text-decoration:none; font-size:13px; padding:6px 8px; border-radius:999px; }
  nav .links a:hover{ background:rgba(255,255,255,.08); color:var(--ink); }
  nav a[aria-current="true"]{ color:var(--ink); background:rgba(255,255,255,.10); }

  /* Hamburger */
  .hamburger{ display:block; cursor:pointer; background:transparent; border:0; padding:8px; border-radius:8px; z-index:11; }
  .hamburger span{ display:block; width:25px; height:3px; background-color:var(--ink); margin:5px 0; transition:0.3s; }

  /* Scrim for mobile drawer */
  .scrim{ position:fixed; inset:0; background:rgba(0,0,0,.35); z-index:11; }

  /* Mobile drawer */
  .mobile-nav{
    display:block; position:fixed; top:0; right:0; width:250px; height:100%;
    transform:translateX(100%); transition:transform .3s ease-in-out;
    background:var(--panel-solid); border-left:1px solid var(--border);
    padding-top:var(--headerH); z-index:12;
  }
  .mobile-nav.open{ transform:translateX(0%); }
  .mobile-nav ul{ list-style:none; margin:0; padding:0; }
  .mobile-nav a{
    display:block; text-align:center; padding:15px 20px; color:var(--ink);
    text-decoration:none; font-size:16px; border-bottom:1px solid var(--border);
  }
  .mobile-nav a:hover{ background:rgba(255,255,255,0.1); }

  /* Content layout */
  main{ position:relative; z-index:2; padding-top:calc(var(--headerH) + 56px); }
  section{ padding:64px 0; scroll-margin-top: calc(var(--headerH) + 16px); }
  .container{ width:min(calc(100% - 24px), var(--maxW)); margin:0 auto; }

  /* Panels */
  .panel{
    background: linear-gradient(to bottom right, rgba(255,255,255,.06), rgba(255,255,255,.02)), var(--panel);
    border:1px solid var(--border); border-radius: var(--radius); padding:28px;
    backdrop-filter: blur(10px) saturate(120%); -webkit-backdrop-filter: blur(10px) saturate(120%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.05), 0 10px 30px rgba(0,0,0,.25);
  }

  /* Hero */
  .hero{ padding:88px 0 48px; }
  .hero .panel{ text-align:center; padding:40px 28px; }
  h1{ margin:0 0 10px; font-weight:700; font-size:48px; letter-spacing:.2px; }

  /* “; accomplished” — keeps glow, adapts on small screens */
  h1 .accomplished{ color:var(--ink); }
  h1 .accomplished .word{ white-space:nowrap; animation: breathing-glow 5s ease-in-out infinite; }
  @keyframes breathing-glow {
    0%, 100% { text-shadow: 0 0 5px rgba(232,241,247,.30); }
    50%      { text-shadow: 0 0 15px rgba(232,241,247,.60); }
  }
  @media (max-width: 640px){
    h1{ font-size:28px; }
    h1 .accomplished{ display:block; margin-top:8px; line-height:1.1; }
    h1 .accomplished .semi{ display:none; } /* hide the leading semicolon on very small screens */
  }

  h1 + .hr{ border:0; height:2px; width:80px; background:var(--accent); margin:20px auto; opacity:0.7; }
  .lead{ color:#cfe0eb; margin:0 auto 18px; max-width:760px; font-size:18px; }
  .actions{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:6px; }

  /* Section titles */
  .overline{ color:var(--muted); letter-spacing:.18em; text-transform:uppercase; font-size:12px; margin-bottom:6px; }
  h2.h2{ font-size:32px; font-weight:700; margin:0 0 12px; }
  .centered-text{ text-align:center; max-width:800px; margin-left:auto; margin-right:auto; }

  /* Grids */
  .values-grid{ display:grid; grid-template-columns:repeat(2, 1fr); gap:18px; margin-top:24px; list-style:none; padding:0; }
  .value-card{ background: linear-gradient(to bottom right, rgba(255,255,255,.05), rgba(255,255,255,.02)); border:1px solid var(--border); border-radius:12px; padding:18px; }
  .value-card h3{ font-family:var(--font-serif); font-size:20px; margin:0 0 6px; color:#eaf3f9; }
  .muted{ color:var(--muted); }

  .stats{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-top:24px; list-style:none; padding:0; }
  .stat{ background: linear-gradient(to bottom right, rgba(255,255,255,.05), rgba(255,255,255,.02)); border:1px solid var(--border); border-radius:12px; padding:16px; text-align:center; backdrop-filter: blur(10px) saturate(120%); -webkit-backdrop-filter: blur(10px) saturate(120%); }
  .stat .num{ font-size:26px; font-weight:650; }
  .stat .lbl{ color:var(--muted); font-size:12px; }
  .stat .lbl .highlight { color: var(--ink); font-weight: 600; }

  .cards{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-top:24px; list-style:none; padding:0; }
  .card{ background: linear-gradient(to bottom right, rgba(255,255,255,.05), rgba(255,255,255,.02)); border:1px solid var(--border); border-radius:12px; padding:18px; backdrop-filter: blur(10px) saturate(120%); -webkit-backdrop-filter: blur(10px) saturate(120%); display: flex; flex-direction: column; }
  .card h3{ font-family:var(--font-serif); font-size:20px; margin:0 0 6px; }
  .card p, .card ul { margin:0; color:#cfe0eb; }

  .expertise-grid { display: grid; grid-template-columns: 1fr; gap: 32px; margin-top: 24px; }
  @media (min-width: 960px) { .expertise-grid { grid-template-columns: 1fr 1fr; } }

  .platform-cards {
    display: grid;
    grid-template-columns: 1fr;
    gap: 18px;
    list-style: none;
    padding: 0;
    margin: 0;
  }
  @media (min-width: 640px) { .platform-cards { grid-template-columns: 1fr 1fr; } }
  .platform-list { list-style: none; padding: 0; margin: 12px 0 0; color: var(--muted); }
  .platform-list li { margin-bottom: 6px; }

  .qualifications-list { list-style: none; padding: 0; margin: 0; }
  .qualifications-list li { margin-bottom: 6px; }

  /* Contact */
  .contact-grid{ display:grid; grid-template-columns:1fr; gap:18px; align-items:start; text-align:center; }
  .contact-grid .btn{ padding:10px 20px; font-size:16px; justify-self:center; }

  /* Footer */
  footer{ position:relative; z-index:2; padding:36px 0 56px; color:var(--muted); text-align:center; }
  footer .container{ opacity:.9; }

  /* Responsive */
  @media (min-width: 960px){
    nav .links{ display:flex; }
    .hamburger{ display:none; }
  }
  @media (max-width: 960px){
    .values-grid{ grid-template-columns:1fr 1fr; }
    .stats{ grid-template-columns:1fr 1fr; }
    .cards{ grid-template-columns:1fr 1fr; }
    h1{ font-size:34px; }
  }
  @media (max-width: 640px){
    .values-grid, .stats, .cards, .platform-cards { grid-template-columns:1fr; }
    /* h1 size override above applies here too */
  }
  </style>
</head>
<body>
<a class="skip-link" href="#main">Skip to content</a>

<canvas id="background-canvas" aria-hidden="true"></canvas>
<div class="vignette" aria-hidden="true"></div>

<header class="site">
  <div class="wrap">
    <a href="#home" class="brand" aria-label="Salinity Maritime, home">Salinity Maritime</a>
    <nav aria-label="Primary">
      <button class="hamburger" aria-controls="mobile-nav-list" aria-expanded="false" aria-label="Open menu">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </button>

      <ul class="links" role="list">
        <li><a href="#purpose">Purpose & Values</a></li>
        <li><a href="#experience">Experience</a></li>
        <li><a href="#services">Capabilities</a></li>
        <li><a href="#expertise">Expertise</a></li>
        <li><a class="btn" href="#contact">Contact</a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="scrim" hidden></div>

<nav class="mobile-nav" id="mobile-nav-list" aria-label="Mobile">
  <ul>
    <li><a href="#purpose">Purpose & Values</a></li>
    <li><a href="#experience">Experience</a></li>
    <li><a href="#services">Capabilities</a></li>
    <li><a href="#expertise">Expertise</a></li>
    <li><a href="#contact">Contact</a></li>
  </ul>
</nav>

<main id="main">
  <section class="hero" id="home" aria-labelledby="hero-title">
    <div class="container">
      <div class="panel">
        <h1 id="hero-title">
          Complex Ship Repair & Sustainment
          <span class="accomplished">
            <span class="semi" aria-hidden="true">; </span>
            <span class="word">accomplished</span>
          </span>
        </h1>
        <hr class="hr">
        <p class="lead">We partner with contractors and program offices to manage complex vessel sustainment programs, modernize shipyard operations, and deliver results. We provide clear plans, reliable execution, and on-time mission readiness.</p>
        <div class="actions">
          <a href="#contact" class="btn">Get In Touch</a>
          <a href="#services" class="link">See our capabilities</a>
        </div>
      </div>
    </div>
  </section>

  <section id="purpose" aria-labelledby="purpose-title">
    <div class="container">
      <div class="panel centered-text">
        <div class="overline">Purpose & Values</div>
        <h2 id="purpose-title" class="h2">How We Work</h2>
        <p class="muted" style="margin-bottom: 24px;">To accomplish complex ship repair and sustainment, we apply a proven methodology that simplifies complexity and modernizes execution. Our approach is grounded in a deep respect for our partners and an unwavering commitment to our core values.</p>
        <ul class="values-grid">
          <li class="value-card">
            <h3>Safety</h3>
            <span class="muted">Our work is guided by the non-negotiable principle to "do it safe, or not at all," protecting program personnel and strengthening your safety culture.</span>
          </li>
          <li class="value-card">
            <h3>Partnership</h3>
            <span class="muted">Our partnerships are defined by ownership. We take on your most complex operational challenges as our own, driving toward mission success as a fully integrated team.</span>
          </li>
          <li class="value-card">
            <h3>Empowerment</h3>
            <span class="muted">We make your people the heroes of every project by building lasting capabilities and fostering a culture of confident, decisive action.</span>
          </li>
          <li class="value-card">
            <h3>Relentless Execution</h3>
            <span class="muted">It is in our DNA to solve the hard problems. We are relentless in overcoming obstacles and will not rest until the mission is accomplished.</span>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <section id="experience" aria-labelledby="experience-title">
    <div class="container">
      <div class="panel">
        <div class="overline">Experience</div>
        <h2 id="experience-title" class="h2">Proven Leadership</h2>
        <p class="muted">A successful program requires mastery of two distinct domains: the strategic foresight to win the work and the operational expertise to execute it. Collectively, our leadership has directed the front-end capture for a multi-yard enterprise, managing over $1B in annual bid volume, and owned the back-end delivery, leading a 2,000-person production workforce and its P&amp;L. This holistic command of the entire program lifecycle, proven by our experience building ship repair business units from scratch, provides our partners with a decisive advantage: the confidence that every plan is grounded in operational reality, and every execution is strategically sound.</p>
        <ul class="stats">
          <li class="stat"><div class="num">1</div><div class="lbl">U.S. Ship Repair Unit <span class="highlight">Built From Scratch</span></div></li>
          <li class="stat"><div class="num">$450M</div><div class="lbl">U.S. Division <span class="highlight">P&amp;L Managed</span></div></li>
          <li class="stat"><div class="num">2,000+</div><div class="lbl"><span class="highlight">Production Workforce</span> Led</div></li>
          <li class="stat"><div class="num">Global</div><div class="lbl">Operations with a <span class="highlight">Middle East Focus</span></div></li>
          <li class="stat"><div class="num">Ahead-of-Schedule</div><div class="lbl">Project Completions</div></li>
          <li class="stat"><div class="num">National</div><div class="lbl">SCA Safety <span class="highlight">Award-Winning</span> Programs</div></li>
        </ul>
      </div>
    </div>
  </section>

  <section id="services" aria-labelledby="services-title">
    <div class="container">
      <div class="panel">
        <div class="overline">Capabilities</div>
        <h2 id="services-title" class="h2">Our Services</h2>
        <p class="muted" style="margin-bottom: 24px;">We are expert integrators. We lead and team with OEMs and specialist SMEs to deliver our core scope of work. We do not self-perform every trade; we plan, integrate, and manage end-to-end delivery with vetted experts.</p>
        <ul class="cards">
          <li class="card"><h3>Estimation &amp; Capture</h3><p>We translate complex requirements into detailed technical specifications and winning proposals. Our bids are grounded in hands-on production experience, ensuring they are competitive and executable.</p></li>
          <li class="card"><h3>Integrated Program Management</h3><p>We manage the full spectrum of vessel availabilities, from large-scale modernizations to time-sensitive emergent repairs. Every phase is integrated and strategically aligned.</p></li>
          <li class="card"><h3>OCONUS Partnership &amp; Sustainment</h3><p>We build strong local partnerships and architect the sustainment model focused on HM&amp;E leadership and program management, with primes and OEMs retained for Combat Systems and C4I.</p></li>
          <li class="card"><h3>Secure Data &amp; Configuration Management</h3><p>With our technology partners we design the process, maintain configuration records, and integrate with your accredited systems and Navy reporting. Our approach is tool-agnostic and operates within ITAR and CUI limits to provide a secure, auditable framework for technical data.</p></li>
          <li class="card"><h3>Distressed Program &amp; Casualty Response</h3><p>We recover distressed projects, stabilize chaotic environments, and drive programs back to on-schedule, on-budget performance.</p></li>
          <li class="card"><h3>Quality Assurance &amp; Program Compliance</h3><p>We establish and manage robust QA/QC programs to U.S. naval ship repair standards, delivering traceable test and inspection records with auditable results.</p></li>
          <li class="card"><h3>Training &amp; Team Development</h3><p>We build high-performing teams through OJT and industrial training programs, and we have stood up entire shipyard training departments to meet compliance and operational requirements.</p></li>
        </ul>
      </div>
    </div>
  </section>

  <section id="expertise" aria-labelledby="expertise-title">
    <div class="container">
      <div class="panel">
        <div class="overline">Platform & Personnel</div>
        <h2 id="expertise-title" class="h2">Deep Expertise, From the Keel Up</h2>
        <p class="muted">Our value is rooted in a combination of hands-on platform knowledge, advanced education, and formal industry certifications. Our leadership team includes a degreed Naval Architect, a U.S. Coast Guard veteran, who have designed the repairs and a licensed Marine Engineer, who has stood the watches. This technical foundation, combined with an Executive MBA and Project Management Professional (PMP) certification, ensures our solutions are technically sound and strategically and financially optimized for program success.</p>
        <div class="expertise-grid">
          <div>
            <h3 style="font-family: var(--font-serif); font-size: 20px; margin:0 0 12px;">Platform Experience</h3>
            <p class="muted" style="margin-bottom: 12px;">We have experience bidding, developing proposals, and leading complex availabilities, both pierside and in dry dock, across the following vessel classes:</p>
            <ul class="platform-cards">
              <li class="card">
                <h3>Naval Combatants</h3>
                <ul class="platform-list">
                  <li>CVN (Aircraft Carrier)</li>
                  <li>CG (Guided Missile Cruiser)</li>
                  <li>DDG (Guided Missile Destroyer)</li>
                  <li>LCS (Freedom &amp; Independence class)</li>
                </ul>
              </li>
              <li class="card">
                <h3>Government &amp; Military Support</h3>
                <ul class="platform-list">
                  <li>T-AH (Hospital Ship)</li>
                  <li>WAGB (Heavy Icebreaker)</li>
                  <li>T-AKE (Dry Cargo/Ammunition)</li>
                  <li>T-AO (Fleet Oiler)</li>
                  <li>WPC (Fast Response Cutter)</li>
                  <li>T-ARS (Salvage Ship)</li>
                  <li>T-ACS (Crane Ship)</li>
                  <li>LSV (Logistics Support Vessel)</li>
                  <li>Buoy Tender</li>
                </ul>
              </li>
              <li class="card">
                <h3>Complex Commercial Platforms</h3>
                <ul class="platform-list">
                  <li>Drill Ships</li>
                  <li>Cruise Ships</li>
                  <li>Oil Tankers</li>
                  <li>Containerships</li>
                  <li>RO/RO</li>
                  <li>Cable Ships</li>
                  <li>Factory Trawlers</li>
		              <li>Fishing Vessels</li>
                  <li>Tug Boats</li>
                  <li>Barges</li>
                </ul>
              </li>
              <li class="card">
                <h3>Specialty &amp; Advanced Platforms</h3>
                <ul class="platform-list">
                  <li>Hybrid Ferry Conversion</li>
                  <li>OSV Conversion</li>
                  <li>Research Vessels</li>
                </ul>
              </li>
            </ul>
          </div>
          <div>
            <h3 style="font-family: var(--font-serif); font-size: 20px; margin:0 0 12px;">Education &amp; Certifications</h3>
            <ul class="qualifications-list">
              <li>B.Eng, Naval Architecture, Newcastle University</li>
              <li>Executive Master of Business Administration (MBA), University of Washington (Expected June 2026)</li>
              <li>B.S., Marine Engineering Technology, California Maritime Academy</li>
              <li>Project Management Professional (PMP)</li>
              <li>OSHA 30 Hour – General Industry</li>
              <li>U.S. Coast Guard 1st Assistant Engineer, Unlimited Horsepower (Motor) (Previously Held)</li>
              <li>U.S. Coast Guard 3rd Assistant Engineer, Unlimited Horsepower (Steam &amp; Gas Turbine) (Previously Held)</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="integrity" aria-labelledby="integrity-title">
    <div class="container">
      <div class="panel centered-text">
        <h2 id="integrity-title" class="h2">Our Commitment to Program Integrity</h2>
        <p class="muted">Compliance is integral to execution. Our operational model will meet requirements to protect our partners, the mission, and shared interests.</p>
      </div>
    </div>
  </section>

  <section id="contact" aria-labelledby="contact-title">
    <div class="container">
      <div class="panel centered-text">
        <h2 id="contact-title" class="h2">Contact</h2>
        <div class="contact-grid">
          <p class="lead" style="margin-bottom: 24px;">
            Send inquiries to discuss partnership opportunities for major sustainment programs,
            operational challenges, or long-term strategic support goals.
          </p>
          <a class="btn" id="contact-link">hello@salinitymaritime.com</a>
        </div>
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="container">
    <div>© 2025 Salinity Maritime. All Rights Reserved.</div>
  </div>
</footer>

<script>
/* ========= Accessible hamburger (mobile) ========= */
(function(){
  const btn   = document.querySelector('.hamburger');
  const panel = document.getElementById('mobile-nav-list');
  const scrim = document.querySelector('.scrim');
  const body  = document.body;
  if (!btn || !panel || !scrim) return;

  let lastFocused = null;

  const focusables = root =>
    [...root.querySelectorAll('a, button, [tabindex]:not([tabindex="-1"])')]
      .filter(el => !el.hasAttribute('disabled') && el.offsetParent !== null);

  function openMenu(){
    lastFocused = document.activeElement;
    btn.setAttribute('aria-expanded','true');
    panel.classList.add('open');
    scrim.hidden = false;
    body.style.overflow = 'hidden';
    const items = focusables(panel);
    if (items.length) items[0].focus();
    document.addEventListener('keydown', onKeydown);
    document.addEventListener('focusin', trapFocus);
  }
  function closeMenu(){
    btn.setAttribute('aria-expanded','false');
    panel.classList.remove('open');
    scrim.hidden = true;
    body.style.overflow = '';
    document.removeEventListener('keydown', onKeydown);
    document.removeEventListener('focusin', trapFocus);
    if (lastFocused) lastFocused.focus();
  }
  function onKeydown(e){
    if (e.key === 'Escape'){ e.preventDefault(); closeMenu(); }
    if (e.key === 'Tab'){
      const items = focusables(panel);
      if (!items.length) return;
      const first = items[0], last = items[items.length-1];
      if (e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
      else if (!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
    }
  }
  function trapFocus(e){ if (!panel.contains(e.target)) { const items = focusables(panel); if (items.length) items[0].focus(); } }

  btn.addEventListener('click', ()=> btn.getAttribute('aria-expanded') === 'true' ? closeMenu() : openMenu());
  scrim.addEventListener('click', closeMenu);
  panel.querySelectorAll('a').forEach(a => a.addEventListener('click', closeMenu));
  window.addEventListener('resize', ()=> { if (window.innerWidth >= 960) closeMenu(); });
})();

/* ========= Active link on scroll (desktop + mobile) ========= */
(function(){
  const links = [...document.querySelectorAll('nav a[href^="#"]')];
  const sections = links.map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);
  if (!sections.length) return;

  const byId = new Map();
  links.forEach(a => {
    const id = a.getAttribute('href').slice(1);
    if (!byId.has(id)) byId.set(id, []);
    byId.get(id).push(a);
  });

  const io = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      if (entry.isIntersecting) {
        links.forEach(a => a.removeAttribute('aria-current'));
        (byId.get(entry.target.id) || []).forEach(a => a.setAttribute('aria-current','true'));
      }
    });
  }, { rootMargin:"-40% 0px -55% 0px", threshold:0 });

  sections.forEach(sec => io.observe(sec));
})();

/* ========= Keep --headerH synced ========= */
(function(){
  function setHeaderH(){
    const h = document.querySelector('header.site')?.offsetHeight || 64;
    document.documentElement.style.setProperty('--headerH', h + 'px');
  }
  setHeaderH();
  addEventListener('resize', setHeaderH, { passive:true });
})();
</script>

<script>
(function(){
  const canvas = document.getElementById('background-canvas');
  if(!canvas) return;
  const ctx = canvas.getContext('2d', { alpha:false, desynchronized:true });

  // ---- Perf/behavior knobs ----
  const DPR_CAP = 2.5;                // INCREASED: For max sharpness on high-res screens.
  const SCALE = 0.65;                 // INCREASED: For a much more detailed internal texture.
  const RESIZE_REDRAW_DELAY_MS = 120; // Debounce for resize/orientation.

  // ONE SHOT MODE is true on phones / coarse pointers OR when reduced motion is enabled.
  const mqCoarse  = matchMedia('(hover: none) and (pointer: coarse)');
  const mqReduced = matchMedia('(prefers-reduced-motion: reduce)');
  function isOneShot(){
    return mqCoarse.matches || mqReduced.matches || window.innerWidth < 640;
  }

  // ---- Permutation / noise helpers ----
  const base = Array.from({length:256}, (_,i)=>i);
  for(let i=255;i>0;i--){ const j = Math.floor(Math.random()*(i+1)); [base[i], base[j]] = [base[j], base[i]]; }
  const perm = base.concat(base);
  function fade(t){ return t*t*t*(t*(t*6 - 15) + 10); }
  function lerp(a,b,t){ return a + t*(b - a); }
  function grad(h,x,y){
    const u = (h & 8) === 0 ? x : y;
    const v = (h & 12) === 12 ? x : ((h & 4) === 0 ? y : 0);
    return ((h & 1) === 0 ? u : -u) + ((h & 2) === 0 ? v : -v);
  }
  function noise(x,y){
    const X = Math.floor(x) & 255, Y = Math.floor(y) & 255;
    const xf = x - Math.floor(x),  yf = y - Math.floor(y);
    const u = fade(xf), v = fade(yf);
    const A = perm[X] + Y, B = perm[X + 1] + Y;
    const n00 = grad(perm[A], xf, yf);
    const n10 = grad(perm[B], xf-1, yf);
    const n01 = grad(perm[A+1], xf, yf-1);
    const n11 = grad(perm[B+1], xf-1, yf-1);
    return lerp(lerp(n00, n10, u), lerp(n01, n11, u), v);
  }
  function fbm(x,y, oct=5, lac=1.95, gain=0.55){
    let v=0, amp=1, freq=1;
    for(let i=0;i<oct;i++){ v += amp * noise(x*freq, y*freq); freq *= lac; amp *= gain; }
    return v*0.5 + 0.5;
  }
  function rampBlueCard(t){
    const stops = [
      [0.00,  12,  28,  48],
      [0.35,  24,  54,  88],
      [0.65,  74, 106, 142],
      [1.00, 196, 210, 224]
    ];
    for(let k=0;k<stops.length-1;k++){
      const [t0,r0,g0,b0]=stops[k];
      const [t1,r1,g1,b1]=stops[k+1];
      if(t<=t1){
        const u=(t - t0)/(t1 - t0);
        return { r:Math.round(lerp(r0,r1,u)), g:Math.round(lerp(g0,g1,u)), b:Math.round(lerp(b0,b1,u)) };
      }
    }
    const [,r,g,b]=stops[stops.length-1];
    return { r,g,b };
  }

  // Offscreen texture
  const tex = document.createElement('canvas');
  const tctx = tex.getContext('2d', { willReadFrequently: true });
  const grain = document.createElement('canvas');
  const gctx = grain.getContext('2d', { willReadFrequently: true });
  let grainPattern = null;
  let imgData = null;

  let W=0, H=0, DPR=1;
  // Store last known dimensions to prevent redraw on scroll
  let lastW = 0, lastH = 0;

  function buildGrain(){
    const sz = 160;
    grain.width = sz; grain.height = sz;
    const id = gctx.createImageData(sz, sz);
    const d = id.data; let p=0;
    for(let y=0;y<sz;y++){
      for(let x=0;x<sz;x++){
        const n = fbm(x*0.35+100, y*0.35+200, 2, 2.2, 0.6);
        const g = Math.floor(120 + n*40);
        d[p++] = g; d[p++] = g; d[p++] = g; d[p++] = 60;
      }
    }
    gctx.putImageData(id,0,0);
    grainPattern = ctx.createPattern(grain,'repeat');
  }

  function resize(){
    DPR = Math.min(window.devicePixelRatio || 1, DPR_CAP);
    W = innerWidth; H = innerHeight;
    canvas.width = Math.floor(W*DPR); canvas.height = Math.floor(H*DPR);
    ctx.setTransform(DPR,0,0,DPR,0,0);
    tex.width  = Math.max(200, Math.floor(W*SCALE));
    tex.height = Math.max(200, Math.floor(H*SCALE));
    imgData = tctx.createImageData(tex.width, tex.height);
    buildGrain();
    // Update last known dimensions
    lastW = W;
    lastH = H;
  }

  function drawFrame(ts){
    const data = imgData.data;
    const cw = tex.width, ch = tex.height;
    const t = ts * 0.000008;

    /* --- Aspect-correct sampling to avoid vertical stretch on tall iPhones --- */
    const k  = Math.min(cw, ch);
    const sx = k / cw;   // scale X samples to min dimension
    const sy = k / ch;   // scale Y samples to min dimension
    const aspect = cw / ch;

    const baseS = 0.010, flowS = 0.0045, warp = 22, grainMix = 0.06;
    const cx = 0.52, cy = 0.46;

    let i=0;
    for(let y=0;y<ch;y++){
      for(let x=0;x<cw;x++){
        // flow field (aspect-correct)
        const vx = noise(x*flowS*sx + t*12, y*flowS*sy);
        const vy = noise(x*flowS*sx,        y*flowS*sy + t*12);
        const ox = warp * vx, oy = warp * vy;

        // main fbm (aspect-correct)
        let v = fbm((x+ox)*baseS*sx + t*6, (y+oy)*baseS*sy - t*6, 5, 1.95, 0.55);

        // isotropic radial center (scale Y by aspect so circle stays round)
        const nx = x/cw, ny = y/ch;
        const dx = nx - cx, dy = (ny - cy) * aspect;
        const center = Math.max(0, 1 - Math.sqrt(dx*dx + dy*dy) / 0.9);
        v = 0.88*v + 0.12*center;

        // fine grain
        const gr = fbm(x*0.12*sx+100, y*0.12*sy+200, 2, 2.1, 0.6);
        v = Math.min(1, Math.max(0, v + (gr - 0.5) * grainMix));

        const {r,g,b} = rampBlueCard(v);
        data[i++] = r; data[i++] = g; data[i++] = b; data[i++] = 255;
      }
    }
    tctx.putImageData(imgData,0,0);
    ctx.drawImage(tex, 0,0,cw,ch, 0,0,W,H);
    if (grainPattern){
      ctx.save(); ctx.globalAlpha = 0.06; ctx.fillStyle = grainPattern; ctx.fillRect(0,0,W,H); ctx.restore();
    }
  }

  // ---- Run mode selection ----
  const STOP_AFTER_MS = 15000; // 15s desktop animation cap

  let rafId = null, last = 0, startTs = 0;
  function animate(ts){
    if (!startTs) startTs = ts;
    const elapsed = ts - startTs;

    // cap to ~30 fps
    if (ts - last >= (1000 / 30)) { last = ts; drawFrame(ts); }

    if (elapsed >= STOP_AFTER_MS) { rafId = null; return; }
    rafId = requestAnimationFrame(animate);
  }

  function renderOnce(){
    if (rafId) { cancelAnimationFrame(rafId); rafId = null; }
    drawFrame(performance.now());
  }

  // Initial sizing + first paint
  resize();
  if (isOneShot()){ renderOnce(); } else { requestAnimationFrame(animate); }

  // Redraw single frame on resize/orientation in one-shot mode
  let tResize;
  function onResized(){
    clearTimeout(tResize);
    tResize = setTimeout(()=>{
      // Check to see if dimensions actually changed before redrawing
      if (window.innerWidth === lastW && window.innerHeight === lastH) {
        return; // Do nothing if the size is the same
      }
      resize();
      if (isOneShot() || !rafId){ renderOnce(); }
    }, RESIZE_REDRAW_DELAY_MS);
  }
  addEventListener('resize', onResized, { passive:true });

  // React to MQ changes
  if (mqCoarse.addEventListener) mqCoarse.addEventListener('change', onResized);
  else if (mqCoarse.addListener) mqCoarse.addListener(onResized);
  if (mqReduced.addEventListener) mqReduced.addEventListener('change', onResized);
  else if (mqReduced.addListener) mqReduced.addListener(onResized);

  // Refresh one-shot frame if tab becomes visible again
  document.addEventListener('visibilitychange', ()=> { if (!document.hidden && isOneShot()) renderOnce(); });
})();
</script>

<script>
(function(){
  // Protect the contact email link
  const contactLink = document.getElementById('contact-link');
  if (contactLink) {
    const user = 'hello';
    const domain = 'salinitymaritime.com';
    contactLink.setAttribute('href', 'mailto:' + user + '@' + domain);
    contactLink.setAttribute('rel', 'nofollow');
  }
})();
</script>
</body>
</html>